!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Dzhyun=t():e.Dzhyun=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){return!("undefined"==typeof window||!window.location)&&/^https:/.test(window.location.href)}function i(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o(),i=/^((\w+)s*:\/\/)?(.*)/.exec(e),u=s(i,4),c=u[2],f=void 0===c?"http":c,l=u[3],p=r?f+"s":f,d=a[p];if(!d)throw new Error('protocol "'+p+'" no support');return d(l,t,n)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,u=e[Symbol.iterator]();!(r=(s=u.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=0;n<(arguments.length<=1?0:arguments.length-1);n+=1){var r=arguments.length<=n+1?void 0:arguments[n+1];if(null!=r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t});var a=function(){function e(t,n,o,s){if(r(this,e),"string"!=typeof t)throw new Error("address is incorrect");if(this.constructor===e)return i(t,n,o,s);this._address=t,this.options=n||{},"boolean"==typeof o?(this._secure=o,this._handler=null):(this._secure=s||!1,this._handler=o),this._protocol="http",this._listenerMap={}}return u(e,[{key:"getAddress",value:function(){return this.getProtocol()+"://"+this._address.replace(/^(\w+:\/\/)?/,"")}},{key:"getProtocol",value:function(){return this._protocol+(this._secure?"s":"")}},{key:"request",value:function(e,t){}},{key:"send",value:function(e,t){return this.request(e,t)}},{key:"close",value:function(){}},{key:"on",value:function(e,t){if("function"==typeof t){var n=this._listenerMap[e]||(this._listenerMap[e]=[]);n.indexOf(t)<0&&n.push(t)}return this}},{key:"off",value:function(e,t){if("function"==typeof t){var n=this._listenerMap[e]||(this._listenerMap[e]=[]),r=n.indexOf(t);r>=0&&n.splice(r,1)}return this}},{key:"trigger",value:function(e){for(var t,n=this,r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];var s=this._listenerMap[e];return s&&s.forEach(function(e){return e.apply(n,o)}),this._handler&&"function"==typeof this._handler[e]&&(t=this._handler)[e].apply(t,o),this}}]),e}();a.EVENT_OPEN="open",a.EVENT_CLOSE="close",a.EVENT_ERROR="error",a.EVENT_REQUEST="request",a.EVENT_SEND="send",a.EVENT_RESPONSE="response",a.EVENT_MESSAGE="message",a.EVENT_PROGRESS="progress",t.default=a},function(e,t,n){"use strict";function r(e,t,n,o){var s=t instanceof Array;Object.keys(t).forEach(function(u){var a=t[u];o&&(u=n?o:"scope["+(s?"":u)+"]"),!o&&s?e.add(a.name,a.value):(n?a instanceof Array:"object"===(void 0===a?"undefined":i(a)))?r(e,a,n,u):e.add(u,a)})}function o(e,t){var n=[];return n.add=function(e,t){this.push(encodeURIComponent(e)+"="+encodeURIComponent(t))},r(n,e,t),n.join("&").replace("%20","+")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.serialize=r,t.param=o},function(e,t,n){"use strict";function r(e){for(var t=e.length,n=new ArrayBuffer(2*t),r=new Uint8Array(n),o=0;o<t;o+=1)r[o]=e.charCodeAt(o);return n}function o(e){var t=new Uint8Array(e),n=t.length;if(n>65535){var r=[],o=0;do{var i=t.subarray(o,o+=65535);r.push(String.fromCharCode.apply(String,i))}while(o<n);return decodeURIComponent(escape(r.join("")))}return decodeURIComponent(escape(String.fromCharCode.apply(String,t)))}Object.defineProperty(t,"__esModule",{value:!0}),t.stringToArrayBuffer=r,t.arrayBufferToString=o},function(e,t,n){"use strict";function r(e){return(0===e.indexOf("?")?e.substring(1):e).split("&").reduce(function(e,t){if(""!==t){var n=t.split("=");e[decodeURIComponent(n[0])]=decodeURIComponent(n.slice(1).join("="))}return e},{})}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})}),t.unParam=r},function(e,t,n){"use strict";var r=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r);n(7),n(9),e.exports=o.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(13),u=r(s),a=n(16),c=r(a),f=n(12),l=r(f),p=n(2),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.options=t}return i(e,[{key:"parse",value:function(t){var n=this;return Promise.resolve().then(function(){return"snappy"===n.options.compresser?e.uncompress(t):t}).then(function(t){return e.isJSON(t)?e.parseJSON(t):void 0===n.options.compresser?e.parseProtoBuf(t,!1!==n.options.yfloat).catch(function(r){return e.uncompress(t).catch(function(){throw r}).then(n.parse.bind(n))}):e.parseProtoBuf(t,!1!==n.options.yfloat)})}}],[{key:"parseProtoBuf",value:function(e,t){return"function"==typeof c.default?(0,c.default)(e,t):Promise.reject(new Error("no support parse protobuf data"))}},{key:"parseJSON",value:function(e){return"function"==typeof l.default?(0,l.default)(e):Promise.reject(new Error("no support parse JSON data"))}},{key:"isJSON",value:function(e){var t=void 0;return"string"==typeof e?t=e.charCodeAt(0):e instanceof ArrayBuffer&&(t=new Uint8Array(e)[0]),123===t}},{key:"uncompress",value:function(e){return Promise.resolve().then(function(){var t=e;if("function"!=typeof u.default)throw new Error("no support snappy uncompress");return"string"==typeof e?(t=(0,p.stringToArrayBuffer)(t),t=(0,u.default)(t)):t=(0,u.default)(t),t})}}]),e}();e.exports=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e){var t={};return e&&Object.keys(e).forEach(function(n){var r=e[n];r instanceof Array&&(r=r.join(",")),null!=r&&(t[n]=r)}),(0,b.param)(t)}function a(){return _+=1}var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,u=e[Symbol.iterator]();!(r=(s=u.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(4),y=r(d),h=n(5),v=r(h),b=n(3),_=0,w=function(){function e(){s(this,e),this._listenerMap={}}return p(e,[{key:"on",value:function(e,t){if("function"==typeof t){var n=this._listenerMap[e]||(this._listenerMap[e]=[]);n.indexOf(t)<0&&n.push(t)}return this}},{key:"off",value:function(e,t){if("function"==typeof t){var n=this._listenerMap[e]||(this._listenerMap[e]=[]),r=n.indexOf(t);r>=0&&n.splice(r,1)}else this._listenerMap[e]=[];return this}},{key:"trigger",value:function(e){for(var t=this,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var i=this._listenerMap[e];return i&&i.forEach(function(e){return e.apply(t,r)}),this}},{key:"alias",value:function(e){e&&(this["on"+e]=this.on.bind(this,e),this["off"+e]=this.off.bind(this,e),this[e]||(this[e]=this.trigger.bind(this,e)))}}]),e}(),g=function(e){function t(e){s(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Object.assign(n,e),n.subscribe=!(!e.queryObject||1!==e.queryObject.sub),n.alias("message"),n.alias("error"),n.onmessage(e.callback),n.onerror(e.callback),n}return i(t,e),p(t,[{key:"then",value:function(){var e,t=this;return(e=new Promise(function(e,n){t.onmessage(e),t.onerror(n)})).then.apply(e,arguments)}},{key:"catch",value:function(){var e,t=this;return(e=new Promise(function(e,n){t.onmessage(e),t.onerror(n)})).catch.apply(e,arguments)}}]),t}(w),m=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.address,r=void 0===n?"ws://gw.yundzh.com/ws":n,i=e.dataType,u=void 0===i?"json":i,c=e.compresser,f=e.dataParser,l=e.token,p=e.generateQid,d=e.secure,y=e.ping,h=void 0!==y&&y,b=e.pingInterval,_=void 0===b?3e4:b,w=e.reconnect,g=void 0!==w&&w,m=e.reconnectInterval,E=void 0===m?1e4:m,O=e.post,S=void 0!==O&&O;s(this,t);var T=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return T.address=r,T.dataType=u,T.compresser=c,T.dataParser=f||new v.default({compresser:c}),T.token=l,T.generateQid=p||a,T.secure=d,T.ping=h,T.pingInterval=_,T.reconnect=g,T.reconnectInterval=E,T.post=S,T._requests={},T._resetReconnectCount(),T.alias("open"),T.alias("close"),T.alias("request"),T.alias("response"),T.alias("error"),T}return i(t,e),p(t,[{key:"_tokenPromise",value:function(){return Promise.resolve(this.token&&this.token.getToken?this.token.getToken():this.token)}},{key:"_connection",value:function(){var e=this;return this._conn=this._conn||Promise.resolve().then(function(){return e._tokenPromise().catch(function(e){return console.warn("request token fail",e)}).then(function(t){var n=void 0,r=new y.default(e.address,{deferred:!0,type:e.post?"POST":"GET"},{open:function(){if(e.trigger("open"),e._resetReconnectCount(),n=Date.now(),e.ping){var t=e.pingInterval;!function e(){setTimeout(function(){1===r.getStatus()&&(Date.now()-n+5e3>=t&&r.request("/ping"),e())},t)}()}},request:function(t){n=Date.now(),"/ping"!==t&&e.trigger("request",t)},response:function(t){n=Date.now(),e.trigger("response",t),e.dataParser&&Promise.resolve(e.dataParser.parse||e.dataParser).then(function(n){n.call(e.dataParser,t).then(function(t){var n=t.Qid,r=t.Err,o=t.Counter,i=t.Data,s=void 0===i?{}:i;if(n){var u=e._requests[n];if(u){if(0!==r){var a=s.desc,c=s.code,f=new Error(a||"unknown error");f.desc=a,f.code=c,f.data=s,u.error(f,o,c,a)}else{var l=s;u.shrinkData&&(l=l[Object.keys(l).filter(function(e){return["Id","Obj"].indexOf(e)<0}).sort(function(e){return 0===e.indexOf("RepData")?-1:1})[0]]),u.message(l,o)}u.subscribe||delete e._requests[n]}}else console.debug("Qid does not exist.")}).catch(function(e){console.error(e)})})},close:function(){e._conn=null,e.trigger("close"),e._reconnect()},error:function(t){e._conn=null,e.trigger("error",t),e._reconnect()}},e.secure),o=r._protocol;return t&&"ws"===o&&r._address.indexOf("token=")<0&&(r._address=r._address+"?token="+t),e._conn=r,e._connectionType=o,e._conn})}),Promise.resolve(this._conn)}},{key:"_reconnect",value:function(){var e=this;(!0===this.reconnect||this.reconnect>this._reconnectCount)&&(this._reconnectTid&&clearTimeout(this._reconnectTid),this._reconnectTid=setTimeout(function(){var t=e._requests;Object.keys(e._requests).forEach(function(e){return t[e].start()}),e._reconnectCount+=1,e.trigger("reconnect")},this.reconnectInterval))}},{key:"_resetReconnectCount",value:function(){this._reconnectCount=0}},{key:"query",value:function(e,t,n,r,o){var i=this;if("string"!=typeof e)throw new Error("url must be a string");"object"!==(void 0===t?"undefined":l(t))&&(o=r,r=n,n=t,t=null),"function"!=typeof n&&(o=r,r=n,n=null),r=!1!==r;var s=e.split("?"),a=f(s,2),p=a[0],d=a[1],y=Object.assign({compresser:this.compresser||void 0,output:this.dataType},(0,b.unParam)(d||""),t),h=y.qid;h||(h=this.generateQid(p,y),y.qid=h);var v=new g({qid:h,serviceUrl:p,queryObject:y,callback:n,shrinkData:r});return v.cancel=this.cancel.bind(this,h),v.start=function(){var e=(v._sid||0)+1;v._sid=e,i._requests[h]=v;var t=void 0;i._connection().then(function(e){return"http"===i._connectionType?(t="pb"===y.output?{dataType:"arraybuffer"}:void 0,y.token?e:i._tokenPromise().then(function(t){return y.token=t,e})):e}).then(function(n){if(i._requests[h]===v&&v._sid===e){var r=u(y),o=void 0,s=y.post||i.post;"http"===i._connectionType&&!0===s?(o=p,t=c({},t,{type:"POST",data:r})):o=r?p+"?"+r:p,n.request(o,t)}})},!1!==o&&v.start(),v}},{key:"subscribe",value:function(e,t,n,r,o){return"object"!==(void 0===t?"undefined":l(t))&&(r=n,n=t,t={}),t=t||{},t.sub=1,this.query(e,t,n,r,o)}},{key:"_cancelRequest",value:function(e){"ws"===this._connectionType&&this._conn&&this._conn.getStatus&&1===this._conn.getStatus()&&this._conn.request("/cancel?qid="+e)}},{key:"cancel",value:function(e){var t=this;if(e)this._cancelRequest(e),delete this._requests[e];else{var n=this._requests;Object.keys(n).forEach(function(e){t._cancelRequest(e),delete n[e]})}}},{key:"close",value:function(){this.cancel(),this._conn&&this._conn.close(),this._conn=null}}]),t}(w);m.Connection=y.default,m.DataParser=v.default,e.exports=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),c=r(a),f=n(11),l=r(f),p=function(e){function t(){var e;o(this,t);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var u=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return u._request=[],u}return s(t,e),u(t,[{key:"request",value:function(e,t){var n=this,r=Object.assign({},this.options,t),o=void 0;return r.success=function(e){n.trigger(c.default.EVENT_MESSAGE,e),n.trigger(c.default.EVENT_RESPONSE,e)},r.error=function(e,t,r){n.trigger(c.default.EVENT_ERROR,r)},r.complete=function(){var e=n._request.indexOf(o);n._request.splice(e,1)},r.url=this.getAddress()+(e||""),o=(0,l.default)(r),o&&(o.onreadystatechange=function(t){return function(){2===o.readyState&&(n.trigger(c.default.EVENT_SEND,e),n.trigger(c.default.EVENT_REQUEST,e)),t&&t()}}(o.onreadystatechange)),this.trigger(c.default.EVENT_OPEN),this._request.push(o),o.onprogress=function(e){n.trigger(c.default.EVENT_PROGRESS,e)},this}},{key:"close",value:function(){var e=this;return this._request.forEach(function(t,n){t.abort(),e._request.splice(n,1)}),this.trigger(c.default.EVENT_CLOSE),this}}]),t}(c.default);c.default.http=function(e,t,n){return new p(e,t,n,!1)},c.default.https=function(e,t,n){return new p(e,t,n,!0)},e.exports=c.default},function(e,t,n){"use strict";var r={};r=n("undefined"!=typeof wx?14:18),"undefined"!=typeof window?window.WebSocket?e.exports=window.WebSocket:console.warn("当前浏览器不支持WebSocket"):"undefined"!=typeof WebSocket?e.exports=WebSocket:e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),c=r(a),f=n(8),l=r(f),p=function(e){function t(e,n,r,s){o(this,t);var u=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,s));return u._protocol="ws",u._ws=null,!1===(n&&!0===n.deferred||!1)&&u._connect(),"undefined"!=typeof window&&window.addEventListener("offline",function(){return u.close()}),u}return s(t,e),u(t,[{key:"getStatus",value:function(){return this._ws?this._ws.readyState:l.default.CLOSED}},{key:"_connect",value:function(){var e=this;if(void 0===l.default)throw Error("Don't support WebSocket");this._ws=new l.default(this.getAddress()),void 0===l.default.OPEN&&(l.default.CONNECTING=this._ws.CONNECTING,l.default.OPEN=this._ws.OPEN,l.default.CLOSING=this._ws.CLOSING,l.default.CLOSED=this._ws.CLOSED),this._ws.binaryType=this.options.binaryType||this.options.dataType||"arraybuffer",this._ws.addEventListener("open",function(){e.trigger(c.default.EVENT_OPEN)}),this._ws.addEventListener("error",function(t){e.trigger(c.default.EVENT_ERROR,t)}),this._ws.addEventListener("close",function(){e.trigger(c.default.EVENT_CLOSE)}),this._ws.addEventListener("message",function(t){e.trigger(c.default.EVENT_MESSAGE,t.data),e.trigger(c.default.EVENT_RESPONSE,t.data)})}},{key:"request",value:function(e){var t=this,n=e||"";return this.getStatus()===l.default.CLOSED&&this._connect(),this.getStatus()!==l.default.OPEN?this._ws.addEventListener("open",function(){t._ws.send(n),t.trigger(c.default.EVENT_SEND,n),t.trigger(c.default.EVENT_REQUEST,n)}):(this._ws.send(n),this.trigger(c.default.EVENT_SEND,n),this.trigger(c.default.EVENT_REQUEST,n)),this}},{key:"close",value:function(){return this.getStatus()!==l.default.CLOSED&&(this._ws.close(),this._ws=null),this}}]),t}(c.default);c.default.ws=function(e,t,n){return new p(e,t,n,!1)},c.default.wss=function(e,t,n){return new p(e,t,n,!0)},e.exports=c.default},function(e,t,n){"use strict";var r={};r=n("undefined"!=typeof wx?15:19),"undefined"!=typeof window?window.XMLHttpRequest?e.exports=window.XMLHttpRequest:console.warn("当前浏览器不支持XMLHttpRequest"):"undefined"!=typeof XMLHttpRequest?e.exports=XMLHttpRequest:e.exports=r.XMLHttpRequest||r},function(e,t,n){"use strict";function r(e){if("undefined"==typeof ArrayBuffer)throw new Error("不支持ArrayBuffer类型");if(e.response instanceof ArrayBuffer)return e.response;for(var t=e.responseText,n=t.length,r=new ArrayBuffer(n),o=new Uint8Array(r),i=0;i<n;i+=1)o[i]=255&t.charCodeAt(i);return r}function o(e){if("undefined"==typeof Blob)throw new Error("不支持Blob类型");if(e.response instanceof Blob)return e.response;var t=r(e);return new Blob([t])}function i(e,t,n){return!0}function s(e,t,n,r){if(e.global)return i(t||T,n,r)}function u(e){e.global&&0==R.active++&&s(e,null,"ajaxStart")}function a(e){e.global&&!--R.active&&s(e,null,"ajaxStop")}function c(e,t){var n=t.context;if(!1===t.beforeSend.call(n,e,t)||!1===s(t,n,"ajaxBeforeSend",[e,t]))return!1;s(t,n,"ajaxSend",[e,t])}function f(e,t,n){var r=n.context;n.success.call(r,e,"success",t),s(n,r,"ajaxSuccess",[t,n,e]),p("success",t,n)}function l(e,t,n,r){var o=r.context;r.error.call(o,n,t,e),s(r,o,"ajaxError",[n,r,e]),p(t,n,r)}function p(e,t,n){var r=n.context;n.complete.call(r,t,e),s(n,r,"ajaxComplete",[t,n]),a(n)}function d(){}function y(e){return e&&(e==P?"html":e==k?"json":j.test(e)?"script":x.test(e)&&"xml")||"text"}function h(e,t){return(e+"&"+t).replace(/[&?]{1,2}/,"?")}function v(e){"object"===w(e.data)&&(e.data=(0,E.param)(e.data)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=h(e.url,e.data))}var b,_,w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g=n(10),m=function(e){return e&&e.__esModule?e:{default:e}}(g),E=n(1),O=0,S="undefined"==typeof window,T=!S&&window.document,j=/^(?:text|application)\/javascript/i,x=/^(?:text|application)\/xml/i,k="application/json",P="text/html",N=/^\s*$/,R=e.exports=function(e){var t=Object.assign({},e||{});for(b in R.settings)void 0===t[b]&&(t[b]=R.settings[b]);u(t),t.crossDomain||(t.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(t.url)&&!S&&!!window.location&&RegExp.$2!=window.location.host);var n=t.dataType,i=/=\?/.test(t.url);if("jsonp"==n||i)return i||(t.url=h(t.url,"callback=?")),R.JSONP(t);t.url||(t.url=!S&&!!window.location&&window.location.toString()),v(t);var s,a=t.accepts[n],p={},w=/^([\w-]+:)\/\//.test(t.url)?RegExp.$1:!S&&!!window.location&&window.location.protocol,g=R.settings.xhr();t.crossDomain?"undefined"!=typeof XDomainRequest&&(g=new XDomainRequest,g.onload=function(){g.readyState=4,g.status=200,g.onreadystatechange()},g.error=function(){g.readyState=4,g.status=400,g.onreadystatechange()}):p["X-Requested-With"]="XMLHttpRequest",a&&(p.Accept=a,a.indexOf(",")>-1&&(a=a.split(",",2)[0]),g.overrideMimeType&&g.overrideMimeType(a)),(t.contentType||t.data&&"GET"!=t.type.toUpperCase())&&(p["Content-Type"]=t.contentType||"application/x-www-form-urlencoded"),t.headers=Object.assign(p,t.headers||{}),g.onreadystatechange=function(){if(4==g.readyState){clearTimeout(s);var e,i=!1;if(g.status>=200&&g.status<300||304==g.status||0==g.status&&"file:"==w){n=n||y(g.contentType||g.getResponseHeader&&g.getResponseHeader("content-type"));try{"script"==n?(0,eval)(e):e="xml"==n?g.responseXML:"json"==n?N.test(g.responseText)?null:JSON.parse(g.responseText):"arraybuffer"===n?r(g):"blob"===n?o(g):g.responseText}catch(e){i=e}i?l(i,"parsererror",g,t):f(e,g,t)}else l(null,"error",g,t)}};var m=!("async"in t)||t.async;if(g.open(t.type,t.url,m),"arraybuffer"==n||"blob"==n){"string"==typeof g.responseType?g.responseType=e.dataType:g.overrideMimeType?g.overrideMimeType("text/plain; charset=x-user-defined"):g.setRequestHeader("Accept-Charset","x-user-defined")}for(_ in t.headers)g.setRequestHeader(_,t.headers[_]);return!1===c(g,t)?(g.abort(),!1):(t.timeout>0&&(s=setTimeout(function(){g.onreadystatechange=d,g.abort(),l(null,"timeout",g,t)},t.timeout)),g.send(t.data?t.data:null),g)};R.active=0,R.JSONP=function(e){if(!("type"in e))return R(e);var t,n="jsonp"+ ++O,r=T.createElement("script"),o=function(){!S&&n in window&&(window[n]=d),p("abort",i,e)},i={abort:o},s=T.getElementsByTagName("head")[0]||T.documentElement;return e.error&&(r.onerror=function(){i.abort(),e.error()}),S||(window[n]=function(r){clearTimeout(t),delete window[n],f(r,i,e)}),v(e),r.src=e.url.replace(/=\?/,"="+n),s.insertBefore(r,s.firstChild),e.timeout>0&&(t=setTimeout(function(){i.abort(),p("timeout",i,e)},e.timeout)),i},R.settings={type:"GET",beforeSend:d,success:d,error:d,complete:d,context:null,global:!0,xhr:function(){return new m.default},accepts:{script:"text/javascript, application/javascript",json:k,xml:"application/xml, text/xml",html:P,text:"text/plain"},crossDomain:!1,timeout:0},R.get=function(e,t){return R({url:e,success:t})},R.post=function(e,t,n,r){return"function"==typeof t&&(r=r||n,n=t,t=null),R({type:"POST",url:e,data:t,success:n,dataType:r})},R.getJSON=function(e,t){return R({url:e,success:t,dataType:"json"})}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){if(!e||!e.head)return e;var t=e.head;return e.data.map(function(e){var n={};return e.forEach(function(e,r){n[t[r]]=o(e)}),n})}function i(e){return Promise.resolve().then(function(){var t="undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?(0,s.arrayBufferToString)(e):e,n=JSON.parse(t);if(0!==n.Err)return n;var i=n.Data;if(i.JsonTbl){var u=o(i.JsonTbl),a=Object.keys(u[0])[0],c=u[0][a];i=r({Id:i.Id},a,c)}return{Qid:n.Qid,Err:n.Err,Counter:n.Counter,Data:i}})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var s=n(2)},function(e,t,n){"use strict";function r(e){if(!(e instanceof ArrayBuffer))throw new TypeError("Argument compressed must be type of ArrayBuffer");var t=new o.SnappyDecompressor(new Uint8Array(e)),n=t.readUncompressedLength();if(-1===n)throw new Error("Invalid Snappy bitstream");var r=new ArrayBuffer(n),i=new Uint8Array(r);if(!t.uncompressToBuffer(i))throw new Error("Invalid Snappy bitstream");return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(17)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";function r(e,t,n,r,o){var i;for(i=0;i<o;i++)n[r+i]=e[t+i]}function o(e,t,n,r){var o;for(o=0;o<r;o++)e[t+o]=e[t-n+o]}function i(e){this.array=e,this.pos=0}var s=[0,255,65535,16777215,4294967295];i.prototype.readUncompressedLength=function(){for(var e,t,n=0,r=0;r<32&&this.pos<this.array.length;){if(e=this.array[this.pos],this.pos+=1,(t=127&e)<<r>>>r!==t)return-1;if(n|=t<<r,e<128)return n;r+=7}return-1},i.prototype.uncompressToBuffer=function(e){for(var t,n,i,u,a=this.array,c=a.length,f=this.pos,l=0;f<a.length;)if(t=a[f],f+=1,0==(3&t)){if((n=1+(t>>>2))>60){if(f+3>=c)return!1;i=n-60,n=a[f]+(a[f+1]<<8)+(a[f+2]<<16)+(a[f+3]<<24),n=1+(n&s[i]),f+=i}if(f+n>c)return!1;r(a,f,e,l,n),f+=n,l+=n}else{switch(3&t){case 1:n=4+(t>>>2&7),u=a[f]+(t>>>5<<8),f+=1;break;case 2:if(f+1>=c)return!1;n=1+(t>>>2),u=a[f]+(a[f+1]<<8),f+=2;break;case 3:if(f+3>=c)return!1;n=1+(t>>>2),u=a[f]+(a[f+1]<<8)+(a[f+2]<<16)+(a[f+3]<<24),f+=4}if(0===u||u>l)return!1;o(e,l,u,n),l+=n}return!0},t.SnappyDecompressor=i},function(e,t){},function(e,t){}])});